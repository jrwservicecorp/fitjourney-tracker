<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FitJourney Tracker - Modern Fitness Edition</title>
  <!-- Google Font: Montserrat -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
  <!-- Bootstrap CSS -->
  <link href="libs/bootstrap/bootstrap.min.css" rel="stylesheet" />
  <!-- Custom Styles -->
  <link rel="stylesheet" href="style.css" />
  
  <!-- Local Libraries -->
  <script src="libs/jquery/jquery.min.js"></script>
  <script src="libs/jquery-event-move/jquery.event.move.min.js"></script>
  <script src="libs/twentytwenty/jquery.twentytwenty.min.js"></script>
  <script src="libs/luxon/luxon.min.js"></script>
  <script src="libs/chartjs/chart.min.js"></script>
  <script src="libs/chartjs-adapter-luxon/chartjs-adapter-luxon.min.js"></script>
  <!-- Load Konva -->
  <script src="https://unpkg.com/konva@8.3.5/konva.min.js"></script>
  <script src="libs/html2canvas/html2canvas.min.js"></script>
  
  <!-- Main Script File -->
  <script src="script.js" defer></script>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container text-center">
      <h1>FitJourney Tracker</h1>
      <p>App Version: <span id="app-version"></span></p>
    </div>
  </header>

  <!-- Navigation Menu -->
  <nav class="navbar">
    <div class="container">
      <div class="btn-group" role="group" aria-label="Main Navigation">
        <button type="button" class="btn nav-btn" data-target="#dashboard-section">Dashboard</button>
        <button type="button" class="btn nav-btn" data-target="#nutrition-section">Nutrition Log</button>
        <button type="button" class="btn nav-btn" data-target="#weight-section">Body Weight Log</button>
        <button type="button" class="btn nav-btn" data-target="#meal-builder-section">Meal Builder</button>
        <button type="button" class="btn nav-btn" data-target="#media-section">Media & Exports</button>
      </div>
    </div>
  </nav>

  <!-- Main App Content -->
  <main id="main-app" class="container my-4">
    <!-- Dashboard Section -->
    <section id="dashboard-section" class="tile">
      <h2 class="dashboard-title">Dashboard</h2>
      <div class="row">
        <div class="col-md-6 mb-4">
          <div class="card">
            <div class="card-body">
              <h3 class="card-title">Weight Chart</h3>
              <canvas id="weightChart"></canvas>
              <p id="chart-placeholder" class="text-muted mt-2">Start logging weight to see trends!</p>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="toggle-demo-data" checked />
                <label class="form-check-label" for="toggle-demo-data">Show Demo Data</label>
              </div>
            </div>
          </div>
        </div>
        <!-- Nutrition Chart -->
        <div class="col-md-6 mb-4">
          <div class="card">
            <div class="card-body">
              <h3 class="card-title">Nutrition Chart</h3>
              <canvas id="nutritionChart"></canvas>
              <p id="nutrition-chart-placeholder" class="text-muted mt-2">Nutrition trends will appear here.</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Summaries -->
      <div class="row">
        <div class="col-md-6 mb-3">
          <!-- Ensure the weight-summary element exists -->
          <div class="card" id="weight-summary">
            <div class="card-body">
              <h3 class="card-title">Weight Summary</h3>
              <p class="placeholder">No weight data available.</p>
            </div>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <div class="card" id="calorie-summary">
            <div class="card-body">
              <h3 class="card-title">Calorie Summary</h3>
              <p class="placeholder">No calorie data available.</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Daily Goals & Progress -->
      <!-- (Omitted for brevity â€“ use your current content) -->
    </section>
    
    <!-- Nutrition Log Section -->
    <section id="nutrition-section" class="tile" style="display:none;">
      <h2 class="dashboard-title">Nutrition Log</h2>
      <!-- Nutrition log content -->
    </section>
    
    <!-- Meal Builder Section -->
    <section id="meal-builder-section" class="tile" style="display:none;">
      <h2 class="dashboard-title">Meal Builder</h2>
      <!-- Meal builder content -->
    </section>
    
    <!-- Body Weight Log Section -->
    <section id="weight-section" class="tile" style="display:none;">
      <h2 class="dashboard-title">Body Weight Log</h2>
      <!-- Body weight log content -->
    </section>
    
    <!-- Media & Exports Section -->
    <section id="media-section" class="tile" style="display:none;">
      <h2 class="dashboard-title">Media & Exports</h2>
      <!-- Photo Upload -->
      <div class="card upload-photo mb-4">
        <div class="card-body">
          <h3 class="card-title">Upload Progress Photo</h3>
          <form id="photo-upload-form" class="row g-3">
            <div class="col-md-4">
              <label for="photo-upload" class="form-label">Select Photo</label>
              <input id="photo-upload" type="file" accept="image/*" class="form-control" />
            </div>
            <div class="col-md-4">
              <label for="photo-date" class="form-label">Photo Date</label>
              <input id="photo-date" type="date" class="form-control" />
            </div>
            <div class="col-md-4 d-flex align-items-end">
              <button id="upload-photo-btn" type="submit" class="btn btn-primary w-100">Upload Photo</button>
            </div>
          </form>
          <!-- Gallery Grid -->
          <div id="photo-gallery" class="gallery"></div>
        </div>
      </div>
      
      <!-- Photo Filter -->
      <div class="card mb-4" id="photo-filter-card">
        <div class="card-body">
          <h3 class="card-title">Filter Gallery by Date Range</h3>
          <div class="row g-3">
            <div class="col-md-4">
              <label for="filter-start-date" class="form-label">Start Date</label>
              <input id="filter-start-date" type="date" class="form-control" />
            </div>
            <div class="col-md-4">
              <label for="filter-end-date" class="form-label">End Date</label>
              <input id="filter-end-date" type="date" class="form-control" />
            </div>
            <div class="col-md-4 d-flex align-items-end">
              <button id="filter-photos-btn" class="btn btn-secondary w-100">Filter Photos</button>
            </div>
          </div>
          <button id="clear-filter-btn" class="btn btn-link mt-2">Clear Filter</button>
        </div>
      </div>
      
      <!-- Side by Side Comparison -->
      <div class="card mb-4">
        <div class="card-body">
          <h3 class="card-title">Side by Side Comparison</h3>
          <div class="photo-selectors mb-3">
            <label for="tt-before" class="form-label">Before</label>
            <select id="tt-before" class="form-select d-inline-block w-auto me-3"></select>
            <label for="tt-after" class="form-label">After</label>
            <select id="tt-after" class="form-select d-inline-block w-auto me-3"></select>
            <button id="tt-update" class="btn btn-primary">Update Comparison</button>
            <button id="open-editor-btn" class="btn btn-outline-secondary ms-2">Open Advanced Editor</button>
          </div>
          <div id="twentytwenty-container" class="comparison-container">
            <div class="comparison-image">
              <img class="twentytwenty-before" src="https://placehold.co/300x400?text=Before" alt="Before">
            </div>
            <div class="comparison-image">
              <img class="twentytwenty-after" src="https://placehold.co/300x400?text=After" alt="After">
            </div>
            <div class="divider"></div>
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <!-- Advanced Editor Modal -->
  <div id="comparison-editor-modal" class="modal">
    <div class="modal-content">
      <div class="modal-toolbar">
        <button class="toolbar-btn" id="add-text-btn">Add Text</button>
        <button class="toolbar-btn" id="edit-text-btn">Edit Text</button>
        <button class="toolbar-btn" id="show-data-btn">Show Data</button>
        <button class="toolbar-btn" id="delete-btn">Delete Element</button>
        <button class="toolbar-btn" id="crop-btn">Crop</button>
        <button class="toolbar-btn" id="reset-crop-btn">Reset Crop</button>
        <button class="toolbar-btn" id="close-editor-btn">Close Editor</button>
      </div>
      <!-- Data Options -->
      <div class="data-options">
        <div>
          <label>Data Type:</label>
          <input type="radio" name="data-type" value="weight" id="data-weight" checked>
          <label for="data-weight">Weight</label>
          <input type="radio" name="data-type" value="nutrition" id="data-nutrition">
          <label for="data-nutrition">Nutrition</label>
          <input type="radio" name="data-type" value="measurements" id="data-measurements">
          <label for="data-measurements">Measurements</label>
          <input type="radio" name="data-type" value="maxlifts" id="data-maxlifts">
          <label for="data-maxlifts">Max Lifts</label>
        </div>
        <div>
          <label for="start-date-select">Start Date:</label>
          <select id="start-date-select"></select>
          <label for="end-date-select">End Date:</label>
          <select id="end-date-select"></select>
        </div>
        <div>
          <label for="chart-type-select">Chart Type:</label>
          <select id="chart-type-select">
            <option value="line">Line Chart</option>
            <option value="bar">Bar Chart</option>
            <option value="pie">Pie Chart</option>
            <option value="sprite">Sprite</option>
          </select>
        </div>
      </div>
      <div id="comparison-editor-container" class="comparison-editor-container">
        <!-- Konva content will be rendered here -->
      </div>
    </div>
  </div>
  
  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; 2025 FitJourney Tracker. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>
